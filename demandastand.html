<!doctype html>
<html>
  <head>
    <title>Dublin Bike Parking</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
      integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
      crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css"
      integrity="sha384-lPzjPsFQL6te2x+VxmV6q1DpRxpRk0tmnl2cpwAO5y04ESyc752tnEWPKDfl1olr"
      crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css"
      integrity="sha384-5kMSQJ6S4Qj5i09mtMNrWpSi8iXw230pKU76xTmrpezGnNJQzj0NzXjQLLg+jE7k"
      crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet-easybutton@2.3.0/src/easy-button.css"
      integrity="sha384-iNk4bdiUuP4VWx8c4KVwk07wshEQVvAe/8xwpcNR/5anLhH9SFPHkjLSXAwGwXKC"
      crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
      integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
      crossorigin="anonymous">
    <style type="text/css">
      html, body {padding:0;margin:0;height:100%;}

      #map {
        width:100%;
        height:100%;
      }
      .info { padding: 6px 8px; font: 14px/16px Arial, Helvetica, sans-serif; background: white; background: rgba(255,255,255,0.8); box-shadow: 0 0 15px rgba(0,0,0,0.2); border-radius: 5px; } .info h4 { margin: 0 0 5px; color: #777; }
      .legend { text-align: left; line-height: 18px; color: #555; }
      .leaflet-popup-content { text-align: center; }
    </style>
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
      integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
      crossorigin="anonymous"></script>
    <script src="https://unpkg.com/leaflet-ajax@2.1.0/dist/leaflet.ajax.min.js"
      integrity="sha384-sKs8ZrrxyJoElcPVznZwGpUTTXvkMYfHYxdIFzO8Hd0TA6emONMj8BwnsFf+6cZ/"
      crossorigin="anonymous"></script>
    <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"
      integrity="sha384-mFKkGiGvT5vo1fEyGCD3hshDdKmW3wzXW/x+fWriYJArD0R3gawT6lMvLboM22c0"
      crossorigin="anonymous"></script>

    <script type="text/javascript">
      window.addEventListener('load', function() {
        var map = L.map('map').setView([53.34587706183283, -6.267379465984959], 14);

        var StandIcon = L.Icon.extend({
          options: {
            iconSize: [10,10]
          }
        })
        var sheffieldStand = new StandIcon({iconUrl: 'stand_icon_sheffield.png'})

        var osm = L.tileLayer('https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Stand Data: collected by volunteers for Dublin Cycling Campaign and I Bike Dublin',
            maxZoom: 19
        }).addTo(map);

        var bleeperHeat = L.heatLayer([],{radius:20,blur:20,gradient:{0:'darkgreen',1:'darkgreen'},minOpacity: 0.4});
        var bleeperHeatLayer = new L.GeoJSON.AJAX("VolunteerStand.geojson",{onEachFeature: function(f,l) {
          if(f.properties.validated != "0") {
            bleeperHeat.addLatLng(L.latLng(f.geometry.coordinates[1],f.geometry.coordinates[0]));
          }
        }});
        bleeperHeat.addTo(map);

        var demandAStandHeat = L.heatLayer([],{radius:20,blur:20,gradient:{0:'red',1:'red'},minOpacity:0.4});
        var demandAStandLayer = new L.GeoJSON.AJAX("DemandAStand.geojson",{onEachFeature: function(f,l) {
          demandAStandHeat.addLatLng(L.latLng(f.geometry.coordinates[1],f.geometry.coordinates[0]));
        }});
        demandAStandHeat.addTo(map);
      });

      function navigationUrl(fromLatLng, toLatLng, travelMode) {
        var toLatLngString = [toLatLng.lat,toLatLng.lng].join(',');
        var fromLatLngString = [fromLatLng.lat,fromLatLng.lng].join(',');

        return "https://www.google.com/maps/dir/?api=1&origin=" + fromLatLngString +
          "&destination=" + toLatLngString + "&travelmode=" + travelMode;
      }
    </script>
  </head>
  <body>
    <div id="map">
    </div>
  </body>
</html>
